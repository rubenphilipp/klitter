<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>utilities.lisp</title>
<!-- Source: ./src/utilities.lisp -->
<!-- Generated with ROBODoc Version 4.99.44 (Nov 13 2022) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="klitter2futilities"></a>
<a name="robo1"></a><h2>klitter/utilities [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./klitter_lisp.html#robo2">klitter</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>utilities</strong>
</pre>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-15
</pre>
<p class="item_name">PURPOSE</p>
<pre> Utility functions for <a href="./klitter_lisp.html#robo2">klitter</a>.

 $$ Last modified:  21:06:05 Mon Jul 22 2024 CEST
</pre>

<hr />
<a name="utilities2falistp"></a>
<a name="robo35"></a><h2>utilities/alistp [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-17
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Tests if an object is of type alist.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The object to test.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> Either t or NIL
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>alistp</strong> '((a . b)
          (c . d)))

;; =&gt; T
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>alistp</strong> (object)
</pre>

<hr />
<a name="utilities2fassoc2dkeys"></a>
<a name="robo36"></a><h2>utilities/assoc-keys [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-17
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Returns a list with all keys of an alist. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> An alist. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A list with keys of the alist.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((lst '((:test . 12)
             (:value2 . 13)
             (:something . 'of-importance))))
  (<strong>assoc-keys</strong> lst))

;; =&gt; '(:TEST :VALUE2 :SOMETHING)
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>assoc-keys</strong> (alist)
</pre>

<hr />
<a name="utilities2fauto2dscale2denv"></a>
<a name="robo37"></a><h2>utilities/auto-scale-env [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> August 29th 2013
</pre>
<p class="item_name">COPYRIGHT</p>
<pre> Michael Edwards (ported from slippery-chicken, <a href="#robo1">utilities</a>.lsp)
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Automatically scale both the x and y values of an envelope to fit within
 the given ranges. Normally we'll assume that the minimum and maximum Y
 values are present in the original envelope and so the automatically scaled
 envelope will represent these with the new minimum and maximum
 values. However sometimes an envelope doesn't range over the possible
 extremes, for example (0 .3 100 .6) where the y range is from 0 to 1. If
 this is the case and you need a scaled envelope to take this into account,
 then how is the original envelopes minimum and maximum values to the
 keyword argument :orig-y-range.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The envelope: a list of x y pairs
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :x-min: The new minimum (starting) x value
 - :x-max: The new maximum (last) x value
 - :y-min: The new minimum (not necessarily starting!) y value
 - :y-max: The new maximum (not necessarily starting!) y value
 - :orig-y-range: a two-element list specifying the original envelope's
   minimum and maximum values (see above).
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The new envelope (list).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">                                        ; ; ; ; ;
(<strong>auto-scale-env</strong> '(0 0 10 1))            ; ; ; ; ;
=&gt;                                      ; ; ; ; ;
(0.0 0.0 100.0 10.0)                    ; ; ; ; ;
                                        ; ; ; ; ;
(<strong>auto-scale-env</strong> '(-1 0 .3 -3 1 1) :y-min 5 :y-max 6 :x-min 2) ; ; ; ; ;
=&gt;                                      ; ; ; ; ;
(2.0 5.75 65.7 5.0 100.0 6.0))          ; ; ; ; ;
                                        ; ; ; ; ;
(<strong>auto-scale-env</strong> '(0 1 5 1.5 7 0 10 1) :y-min -15 :y-max -4) ; ; ; ; ;
=&gt;                                      ; ; ; ; ;
(0.0 -7.6666665 50.0 -4.0 70.0 -15.0 100.0 -7.6666665)) ; ; ; ; ;
                                        ; ; ; ; ;
(<strong>auto-scale-env</strong> '(0 .5 100 .5) :y-min 1 :y-max 2) ; ; ; ; ;
=&gt; (0.0 1.0 100.0 1.0)                  ; ; ; ; ;
                                        ; ; ; ; ;
(<strong>auto-scale-env</strong> '(0 .5 100 .5) :y-min 1 :y-max 2 :orig-y-range '(0 1)) ; ; ; ; ;
=&gt; (0.0 1.5 100.0 1.5)                  ; ; ; ; ;
                                        ; ; ; ; ;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>auto-scale-env</strong> (env &amp;key
                             (x-min 0.0) (x-max 100.0)
                             (y-min 0.0) (y-max 10.0)
                             orig-y-range)
</pre>

<hr />
<a name="utilities2fequal2dwithin2dtolerance"></a>
<a name="robo38"></a><h2>utilities/equal-within-tolerance [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Test whether the difference between two decimal numbers falls within a
 specified tolerance.

 This test is designed to compensate for calculation discrepancies caused by
 floating-point errors (such as 2.0 vs. 1.9999997), in which the equations
 should yield equal numbers. It is intended to be used in place of = in such
 circumstances.
</pre>
<p class="item_name">COPYRIGHT</p>
<pre> Michael Edwards (ported from slippery-chicken, <a href="#robo1">utilities</a>.lsp)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A first number.
 - A second number.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - A decimal value that is the maximum difference allowed between the two
   numbers that will still return T. Default = 0.000001d0.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> T if the two tested numbers are equal within the specified tolerance,
 otherwise NIL.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">;; An example of floating-point error   ; ;
(loop for i from 0.0 below 1.1 by 0.1 collect i) ; ;
                                        ; ;
=&gt; (0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.70000005 0.8000001 0.9000001 1.0000001) ; ;
                                        ; ;
;; Using =                              ; ;
(loop for i from 0.0 below 1.1 by 0.1   ; ;
for j in '(0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0) ; ;
collect (= i j))                        ; ;
                                        ; ;
=&gt; (T T T T T T T NIL NIL NIL NIL)      ; ;
                                        ; ;
;; Using <strong>equal-within-tolerance</strong>         ; ;
(loop for i from 0.0 below 1.1 by 0.1   ; ;
for j in '(0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0) ; ;
collect (<strong>equal-within-tolerance</strong> i j))   ; ;
                                        ; ;
=&gt; (T T T T T T T T T T T)              ; ;
                                        ; ;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>equal-within-tolerance</strong> (a b &amp;optional (tolerance 0.000001d0))
</pre>

<hr />
<a name="utilities2fgeneric2dsymbol"></a>
<a name="robo39"></a><h2>utilities/generic-symbol [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-16
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function creates a generic symbol from a given string and interns
 it as a symbol into the package. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A symbol to generify. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The generic symbol. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>generic-symbol</strong> 'test)
;; =&gt; TEST458
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>generic-symbol</strong> (name)
</pre>

<hr />
<a name="utilities2finterpolate"></a>
<a name="robo40"></a><h2>utilities/interpolate [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Get the interpolated value at a specified point within an envelope. The
 envelope must be specified in the form of a list of break-point pairs.
</pre>
<p class="item_name">COPYRIGHT</p>
<pre> Michael Edwards (ported from slippery-chicken, <a href="#robo1">utilities</a>.lsp)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A number that is the point within the specified envelope for which to
   return the interpolated value.
 - A list of break-point pairs.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword arguments:
 - :scaler. A number that is the factor by which to scale the values of
   the break-point pairs in the given envelope before retrieving the
   interpolated value. Default = 1.
 - :exp. A number that is the exponent to which the result should be
   raised. Default = 1.
 - :warn. T or NIL to indicate whether the method should print a warning if
   the specified point is outside of the bounds of the x-axis specified in
   the list of break-point pairs. T = warn. Default = T.
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">;;; Using the defaults                  ; ;
(<strong>interpolate</strong> 50 '(0 0 100 1))           ; ;
                                        ; ;
=&gt; 0.5                                  ; ;
                                        ; ;
;;; Specifying a different scaler       ; ;
(<strong>interpolate</strong> 50 '(0 0 100 1) :scaler 2) ; ;
                                        ; ;
=&gt; 1.0                                  ; ;
                                        ; ;
;;; Specifying a different exponent by which the result is to be raised ; ;
(<strong>interpolate</strong> 50 '(0 0 100 1) :exp 2)    ; ;
                                        ; ;
=&gt; 0.25                                 ; ;
                                        ; ;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>interpolate</strong> (point env &amp;key (scaler 1) (exp 1) (warn t))
</pre>

<hr />
<a name="utilities2fmins2dsecs2dto2dsecs"></a>
<a name="robo41"></a><h2>utilities/mins-secs-to-secs [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DESCRIPTION</p>
<pre> Derive the number of seconds from a minutes-seconds value that is indicated
 as a string of the form "0:00.000" or a two-item list in the form '(minutes
 seconds) or three-item list in the form '(minutes seconds milliseconds)

 Courtesy of Michael Edwards (<a href="http://github.com/mdedwards/slippery-chicken)">http://github.com/mdedwards/slippery-chicken)</a>
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A time in minutes and seconds, as described above.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - if a string is to be passed, then a character that denotes the separator
 between minutes and seconds. Default = #\:
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A decimal number that is a number in seconds.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>mins-secs-to-secs</strong> '(2 1))
=&gt; 121.0
(<strong>mins-secs-to-secs</strong> '(16 59 534)))
=&gt; 1019.534 
(<strong>mins-secs-to-secs</strong> "3:06.829"))
=&gt; 186.829
;; using a different separator character between minutes and seconds
(<strong>mins-secs-to-secs</strong> "3-36.29" #\-) 0.0001)
=&gt; 216.29
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>mins-secs-to-secs</strong> (time &amp;optional (post-mins #\:))
</pre>

<hr />
<a name="utilities2fnearest"></a>
<a name="robo42"></a><h2>utilities/nearest [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">DATE</p>
<pre> 15th May 2020, Heidhausen
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Return the <strong>nearest</strong> number in a list to the first argument
</pre>
<p class="item_name">COPYRIGHT</p>
<pre> Michael Edwards (ported from slippery-chicken, <a href="#robo1">utilities</a>.lsp)
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the number we're looking to get the closest to
 - the list of numbers we'll search
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> the element of the list that's closest to the first argument, the list
 sorted by <strong>nearest</strong> to the number, the distances to the number for the sorted
 list. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> none
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>nearest</strong> 1.21 '(4 2 5 3 5 4 1.2 1.3 1.1999)) ; ;
--&gt; 1.2                                 ; ;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>nearest</strong> (num list)
</pre>

<hr />
<a name="utilities2fpath2dfrom2dsame2ddir"></a>
<a name="robo43"></a><h2>utilities/path-from-same-dir [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-09
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function returns the full path to a file reilative to the directory of
 the current lisp file.
 NB: This function is borrowed from Michael Edwards's slippery-chicken.
 NB2: This function does not work with files which have been loaded via
      ASDF/quicklisp.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string indicating the filename (or pathname) to the file relative to
   the current lisp file.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string with the full path to the file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>path-from-same-dir</strong> (file)
</pre>

<hr />
<a name="utilities2fpath2dfrom2dsrc2ddir"></a>
<a name="robo44"></a><h2>utilities/path-from-src-dir [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-16
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function returns a path from the src dir. It is intended to be used
 within the main lisp files.
 NB: This function requires ASDF. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - A string indicating the filename (or pathname) to the file relative to
   the src directory file.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> A string with the full path to the file.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>path-from-src-dir</strong> (file)
</pre>

<hr />
<a name="utilities2fshell"></a>
<a name="robo45"></a><h2>utilities/shell [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-16
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Runs a <strong>shell</strong> program and return the full result as a string or throws an
 error when the call to the program fails.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The command (e.g. a path to a binary).
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> rest:
 - The arguments to the <strong>shell</strong> program. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The result of the <strong>shell</strong> program call as a string.
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(<strong>shell</strong> (<a href="./globals_lisp.html#robo12">get-kr-config</a> :sa-command) "-v")
;; =&gt; "1.6"
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>shell</strong> (command &amp;rest arguments)
</pre>

<hr />
<a name="utilities2fsimple2dshell"></a>
<a name="robo46"></a><h2>utilities/simple-shell [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-16
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> Run a <a href="#robo45">shell</a> command from lisp and return the exit code.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The <a href="#robo45">shell</a> command (i.e., most likely, path to the binary)
 
 OPTIONAL ARGUMENTS:
 rest:
 - The arguments to the <a href="#robo45">shell</a> program.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The the exit-code of the process.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>simple-shell</strong> (command &amp;rest arguments)
</pre>

<hr />
<a name="utilities2ftrailing2dslash"></a>
<a name="robo47"></a><h2>utilities/trailing-slash [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo1">utilities</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2023-07-09
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function ensures that a (path) string ends with a trailing slash.
 NB: This function is borrowed from Michael Edwards's slippery-chicken.
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> A string containing the path to be checked and corrected.
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The path with a trailing slash.
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>trailing-slash</strong> (path)
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./src/utilities.lisp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2024-07-23 16:22:51</p>
</div> <!-- footer -->
</body>
</html>
